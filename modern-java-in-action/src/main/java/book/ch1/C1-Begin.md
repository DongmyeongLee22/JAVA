# CHAPTER 1
- 자바 8, 9, 10, 11: 무슨 일이 일어나고 있는가?

---

#### 스트림 처리
- 스트림이란 한 번에 한 개씩 만들어지는 연속적인 데이터 항목들의 모임입니다.
- 즉 이론적으로는 프로그램은 입력 스트림에서 데이터 한개를 읽어, 출력 스트림으로 데이터를 한개 씩 기록합니다.
- 어떤 프로그램의 출력 스트림은, 다른 프로그램의 입력 스트림이 될 수 있는데 유닉스 계열의 파이프라인( | )을 생각해보시면 됩니다.

#### 함수형 프로그래밍의 핵심
- 메서드를 일급 시민으로 사용하는 것
- 공유되지 않은 가변 데이터, 메서드, 함수 코드를 다른 메서드로 전달하는 것(공유 되지 않는 가변 데이터를 병렬로 처리하여 효율을 높이는 것)


## 자바 8에 추가된 새로운 개념들
### 1. 자바 함수
- 프로그래밍 언어에서 함수라는 용어는 메서드, 특히 정적 메서드와 같은 의미로 사용됩니다.
- 자바에서는 이에 더해 수학적인 함수 처럼 사용되며 부작용을 일으키지 않는 함수를 의미합니다.
- **자바 8에서는 함수를 새로운 값의 형식으로 추가했습니다.**

#### 1) 함수를 값으로 취급할 때의 이점
- 프로그래밍 언어의 핵심은 값을 바꾸는 것입니다.
- 값에는 보통 일급 값(시민), 이급 시민이 존재합니다.
- **일급 시민이란** 변화되는 값이라고 할 수 있습니다.
- 자바에서는 클래스, 메서드와 같은 구조체를 통해 값을 변경시킬 수 있습니다.
- 허나 구조체(클래스, 메서드)는 프로그램 실행 도중 값을 변경할 수 없기 때문에 **이급 시민이** 됩니다.
- 자바8에서는 런타임 시점에 이러한 **이급 시민** 들을 **일급 시민** 으로 변경시킬 수 있는 방법을 제공합니다.

#### 2) 메서드를 일급 시민으로
- 먼저 **메서드 참조는** 해당 메서드를 일급 시민으로 간편하게 만들 수 있도록 제공합니다.

---
## 자바의 스트림의 주는 이점?
### 멀티코어 컴퓨터
- 전통적인 자바 프로그램은 보통 컴퓨터의 CPU의 하나만 사용합니다.
- 하지만 대부분의 현대 컴퓨터는 여러개의 프로세서가 존재합니다.
- 만약 컬렉션 라이브러리로 하나하나 데이터를 처리해줬다면 하나의 프로세서를 통해 데이터가 처리될 것입니다.
- 하지만 Stream을 사용하게되면 내부적으로 해당 데이터를 병렬로 처리해 주므로 CPU를 효율적으로 사용할 수 있게됩니다.

### 멀티스레딩의 어려움
- 멀티 스레딩은 일반적인 프로그래머가 처리하기 쉽지 않습니다.
- 제대로 처리하지 못할 경우 공유데이터 문제가 발생하여 데이터가 동기화되지 않을 수도 있습니다.
- 이러한 불편함 때문에 다양한 변화들이 생겨났고 스트림 API도 해당 문제들을 해결할 수 있도록 내부적으로 병렬 처리를 지원해 줍니다.

> 즉 스트림 API는 컬렉션을 처리하면서 발생하는 모호함과 반복적인 코드 문제와 멀티코어 활용의 어려움이라는 두가지 문제를 해결해주는 기능이라고 할 수 있습니다.

> 컬렉션은 데이터를 효율적으로 저장하는데 적합할 것이며 스트림은 해당 데이터를 효율적으로 처리하는데 적합한 API입니다.

#### 어떻게 병럴적인 처리가 이루어 질까?
- 자바에서 동기화를 지원해주는 대표적인 synchronized는 에러가 발생하기 쉽고 효율이 썩 좋지 않습니다.
- 그럼 스트림은 어떻게 병렬 처리를 하게될까요?
- 먼저 스트림은 해당 데이터들을 작은 스트림으로 분할하여 처리를 하게 됩니다.
- 그리고 만약 filter 같은 메서드에 넘겨주는 함수가 서로 상호작용하지 않는다면 간편하게 병렬처리를 진행할 수 있게됩니다.

---
### 자바의 인터페이스 디폴트 메서드
- 흔히 컬렉션의 List를 정렬할 때는 Collection.list(list, comparator)를통해 정렬를 하게됩니다.
- 사실 list.sort(comparator)와 같이 정렬하는게 더 프로그래밍적 관점에서 적합하다고 할 수 있습니다.
- 자바 8의 인터페이스 디폴트 메서드를 통해 이제 이러한 방법으로 기능을 제공할 수 있게 되었습니다.
